"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[651],{1450:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"tutorial-extras/kubernetes-installation","title":"Kubernetes Installation","description":"Follow this process to install Certifai in Kubernetes.\\n","source":"@site/docs/tutorial-extras/kubernetes-installation.md","sourceDirName":"tutorial-extras","slug":"/tutorial-extras/kubernetes-installation","permalink":"/documentarian/docs/tutorial-extras/kubernetes-installation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Kubernetes Installation","linkTitle":"Kubernetes Installation","description":"Follow this process to install Certifai in Kubernetes.\\n"},"sidebar":"templateSidebar","previous":{"title":"Interpret Scan Results","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/interpret-scan-results"},"next":{"title":"Monitoring Dashboard","permalink":"/documentarian/docs/tutorial-extras/monitoring-dashboard"}}');var i=s(4848),c=s(8453);const t={title:"Kubernetes Installation",linkTitle:"Kubernetes Installation",description:"Follow this process to install Certifai in Kubernetes.\n"},d=void 0,o={},l=[{value:"Installation Prerequisites",id:"installation-prerequisites",level:2},{value:"Certifai Enterprise Configuration",id:"certifai-enterprise-configuration",level:2},{value:"Certifai Enterprise Installation",id:"certifai-enterprise-installation",level:2},{value:"Create an instance of Certifai Enterprise",id:"create-an-instance-of-certifai-enterprise",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"installation-prerequisites",children:"Installation Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kubernetes version v1.16 or greater"}),"\n",(0,i.jsx)(n.li,{children:"Docker CLI configured with permissions to push to the docker registry used by the Kubernetes cluster"}),"\n",(0,i.jsx)(n.li,{children:"Certifai Enterprise Archive (Zip) file obtained from your CognitiveScale Certifai Sales Representative"}),"\n",(0,i.jsx)(n.li,{children:"Linux/OSX Control machine to run the installation script with a few dependencies needed that are described in the Certifai Enterprise Installation section"}),"\n",(0,i.jsx)(n.li,{children:"A command line yaml processor -"}),"\n",(0,i.jsx)(n.li,{children:"Credentials for a PostgreSQL database (We recommend PostgreSQL 13.x) to setup the Reporting ETL job for scan reports and policy checks"}),"\n",(0,i.jsx)(n.li,{children:"Credentials and bucket details for one of AWS S3, GCP GCS, Azure BlobStorage; these details are needed later while setting up the Certifai Custom Resource on Kubernetes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"certifai-enterprise-configuration",children:"Certifai Enterprise Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["The default Certifai Installation script creates a Certifai Enterprise subscription in the ",(0,i.jsx)(n.code,{children:"certifai"})," namespace by default. You can change this behavior by editing the following files:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Cluster Roles for Subject Access Reviews - Edit the file named ",(0,i.jsx)(n.code,{children:"gke-rbac-clusterroles.yaml"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"subjects.namespace"})," the namespace you want to install Certifai Enterprise into"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"certifai-enterprise-installation",children:"Certifai Enterprise Installation"}),"\n",(0,i.jsx)(n.p,{children:"Run the installation script:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"./install-offline.sh -u <DOCKER USER> -p <DOCKER REGISTRY PASSWORD> -r <DOCKER REGISTRY URL> -n <NAMESPACE> -m\n"})}),"\n",(0,i.jsx)(n.h2,{id:"create-an-instance-of-certifai-enterprise",children:"Create an instance of Certifai Enterprise"}),"\n",(0,i.jsxs)(n.p,{children:["If you are using LDAP integration, do that integration now before creating and applying the ",(0,i.jsx)(n.code,{children:"certifai-cr.yaml"})," file."]}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsx)(n.p,{children:"In this section we first configure a Certifai Enterprise installation (Operand / Application) in the namespace supplied during the Enterprise installation."})}),"\n",(0,i.jsxs)(n.p,{children:["Create a new file called ",(0,i.jsx)(n.code,{children:"certifai-cr.yaml"})," with the following YAML content:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: cortex.cognitivescale.com/v1\nkind: Certifai\nmetadata:\n  name: default-certifai\n  # namespace should match the namespace set in the subscription defined earlier in the Enterprise Configuration section\n  namespace: certifai\nspec:\n  deployment-type: k8s\n  dex:\n    #enable dex to act as the oidc provider\n    enabled: true\n    create-ingress: true\n    replicas: 1\n    #dex auth provider connector\n    connector:\n      type: github\n      name: Github\n      client-id: github oauth app client id\n      client-secret: github oauth app client secret\n      #additional configurations as found in https://github.com/dexidp/website/tree/main/content/docs/connectors\n      add-config: |\n        orgs:\n        - name: org-to-provide access to\n  console:\n    create-ingress: true\n    replicas: 1\n    route-type: oauth\n    authorization-type: rbac\n    s3:\n      access-key: your access key\n      endpoint: \'https://s3.amazonaws.com\'\n      secret-key: your secret key\n      verify-cert: false\n    scan-dir: path to the storage bucket or container\n  reference-model:\n    enabled: true\n  policy:\n    create-ingress: true\n    s3:\n      access-key: your access key\n      endpoint: \'https://s3.amazonaws.com\'\n      secret-key: your secret key\n      verify-cert: false\n    enabled: true\n    questionnaire-dir: path to the storage bucket or container\n    policy-control-config-file: path to the control config yaml file\n    authorization-type: rbac\n    replicas: 1\n    route-type: oauth\n  scan-manager:\n    enabled: false\n    create-ingress: true\n    replicas: 1\n    scan-data-dir: ""\n    ingress-config:\n      max-body-size: 1000m\n      proxy-connect-timeout: "180"\n      proxy-read-timeout: "180"\n  reporting:\n    enabled: true\n    period: "*/15 * * * *"\n    db-conn-str: "postgresql://user:password@service:port/db"\n  monitoring:\n    enabled: true\n    period: \'*/15 * * * *\'\n    monitoring-dir: ""\n  rai-center:\n    enabled: true\n    create-ingress: false\n    replicas: 1\n    db-conn-str: "postgresql://user:password@service:port/db"\n    rai-reports-dir: ""\n'})}),"\n",(0,i.jsx)(n.p,{children:"Edit the following spec/dex parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/deployment-type"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/enabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/replicas"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/type"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/name"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/client-id"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/client-secret"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/add-config"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/gcs/application-credentials"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spec/console/route-type"}),": Set this to ",(0,i.jsx)(n.code,{children:"oauth"})," if ",(0,i.jsx)(n.code,{children:"spec.dex.enabled"})," is set to ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spec/console/authorization-type"}),": Set this to ",(0,i.jsx)(n.code,{children:"rbac"})," if ",(0,i.jsx)(n.code,{children:"spec.dex.enabled"})," is set to true"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/azure/account-name"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/azure/account-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/azure/sas-token"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/s3/access-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/s3/endpoint"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/s3/secret-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/console/scan-dir"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/enabled"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spec/policy/route-type"}),": Set this to ",(0,i.jsx)(n.code,{children:"oauth"})," if ",(0,i.jsx)(n.code,{children:"spec.dex.enabled"})," is set to ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spec/policy/authorization-type"}),": Set this to ",(0,i.jsx)(n.code,{children:"rbac"})," if ",(0,i.jsx)(n.code,{children:"spec.dex.enabled"})," is set to true"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/gcs/application-credentials"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/azure/account-name"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/azure/account-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/azure/sas-token"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/s3/access-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/s3/endpoint"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/s3/secret-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/policy/questionnaire-dir"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/enabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/replicas"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/scan-data-dir"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/ingress-config/max-body-size"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/ingress-config/proxy-connect-timeout"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/ingress-config/proxy-read-timeout"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/reference-model/enabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/reporting/enabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/reporting/period"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/reporting/db-conn-str"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/monitoring/enabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/monitoring/period"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/monitoring/monitoring-dir"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/enabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/create-ingress"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/replicas"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/db-conn-str"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/rai-reports-dir"})}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"apiVersion"})}),(0,i.jsx)(n.td,{children:"APIVersion defines the versioned schema of this representation of an object. Should NOT be changed by users."}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cortex.cognitivescale.com/v1"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"kind"})}),(0,i.jsx)(n.td,{children:"Identifies the package type you are installing"}),(0,i.jsxs)(n.td,{children:["(Always) ",(0,i.jsx)(n.code,{children:"Certifai"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"metadata/name"})}),(0,i.jsx)(n.td,{children:"The name of your installation as configured"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"default-certifai"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"metadata/namespace"})}),(0,i.jsx)(n.td,{children:"The namespace you selected in the Subscription section of the Enterprise Configuration section above"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"certifai"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/deployment-type"})}),(0,i.jsxs)(n.td,{children:["Options are: ",(0,i.jsx)("br",{}),(0,i.jsx)(n.code,{children:"gke"}),": This guide is for GKE so this is the only option that works here."]}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"openshift"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/dex/enabled"})}),(0,i.jsx)(n.td,{children:"Enable Dex as an authentication provider to access the Certifai Console and remote CLI operations."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"false"}),"; set this to ",(0,i.jsx)(n.code,{children:"true"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/type"})}),(0,i.jsxs)(n.td,{children:["Dex connector type: Should be one of the options described at ",(0,i.jsx)(n.a,{href:"https://dexidp.io/docs/connectors/",children:"https://dexidp.io/docs/connectors/"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"github"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/name"})}),(0,i.jsx)(n.td,{children:"The name of the Dex connector. Can be set to a sane value of your choice. Required field when Dex is enabled"}),(0,i.jsx)(n.td,{children:"your-dex-connector-name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/client-id"})}),(0,i.jsx)(n.td,{children:"oauth app client ID for the Dex connector of your choice. Required field when Dex is enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-oauth-provider-client-id"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/client-secret"})}),(0,i.jsx)(n.td,{children:"oauth app client secret for the Dex connector of your choice. Required field when Dex is enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-oauth-provider-client-secret"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/dex/connector/add-config"})}),(0,i.jsx)(n.td,{children:"Additional configuration (yaml) you may want to pass on to Dex, including specific organization, teams etc. Refer to the documentation for connectors. All fields, excluding client ID, client Secret and redirectURI, maybe specified in this section. Optional field when Dex is enabled"}),(0,i.jsxs)(n.td,{children:["orgs: ",(0,i.jsx)("br",{}),"- name: organization-with-certifai-access"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/replicas"})}),(0,i.jsx)(n.td,{children:"The number of console instances you want your organization to run concurrently"}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"2"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/route-type"})}),(0,i.jsxs)(n.td,{children:["Console access options are: ",(0,i.jsx)("br",{}),(0,i.jsx)(n.code,{children:"none"})," (default): no authentication is required to open the Console ",(0,i.jsx)("br",{}),"  ",(0,i.jsx)(n.code,{children:"http"}),": Unsecured for a closed network ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.code,{children:"https"}),": Secured for the internet ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.code,{children:"oauth"}),": Enables login with Dex connector credentials"]}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"none"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/authorization-type"})}),(0,i.jsxs)(n.td,{children:["If Dex is enabled and you want to control access to the Certifai Console, set this field to ",(0,i.jsx)(n.code,{children:"rbac"}),". Otherwise, the Certifai Console will have unauthenticated access"]}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"none"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/scan-dir"})}),(0,i.jsxs)(n.td,{children:["A path-like string prefixed with ",(0,i.jsx)(n.code,{children:"gs://"})," for ",(0,i.jsx)(n.code,{children:"gcs"})," storage, ",(0,i.jsx)(n.code,{children:"abfs://"})," for Azure Storage Accounts and ",(0,i.jsx)(n.code,{children:"s3://"})," for S3 / Ceph / Noobaa storage accounts"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"scan-dir"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/gcs/application-credentials"})}),(0,i.jsx)(n.td,{children:"JSON content of the application credentials file for a service account obtained from GCP. This needs to be a JSON key and not P12."}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application-credentials"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/s3/access-key"})}),(0,i.jsx)(n.td,{children:"The s3 (or Ceph) access key you configured during your infrastructure setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"access-key"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/s3/endpoint"})}),(0,i.jsx)(n.td,{children:"The s3 (or noobaa/Ceph) endpoint you configured during your infrastructure setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"s3.amazonaws.com"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/s3/secret-key"})}),(0,i.jsx)(n.td,{children:"The s3 (or Ceph) secret-key you configured during your infrastructure setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"s3secret1234"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/azure/account-name"})}),(0,i.jsx)(n.td,{children:"The name of your Azure Storage Account with Blob containers"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account-name"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/azure/account-key"})}),(0,i.jsxs)(n.td,{children:["An account key for a Blob Container present in the ",(0,i.jsx)(n.code,{children:"account-name"})," referenced above"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account-key"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/console/azure/sas-token"})}),(0,i.jsxs)(n.td,{children:["An SAS token for a Blob Container present in the ",(0,i.jsx)(n.code,{children:"account-name"})," referenced above"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sas-token"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/replicas"})}),(0,i.jsx)(n.td,{children:"The number of policy instances you want your organization to run concurrently"}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"2"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/route-type"})}),(0,i.jsxs)(n.td,{children:["Policy Access options are: ",(0,i.jsx)("br",{}),(0,i.jsx)(n.code,{children:"none"})," (default): no authentication is required to open the policy",(0,i.jsx)("br",{}),(0,i.jsx)(n.code,{children:"http"}),": Unsecured for a closed network",(0,i.jsx)("br",{}),(0,i.jsx)(n.code,{children:"https"}),": Secured for the internet",(0,i.jsx)("br",{}),(0,i.jsx)(n.code,{children:"oauth"}),": Enables login with Dex connector credentials"]}),(0,i.jsxs)(n.td,{children:["default=",(0,i.jsx)(n.code,{children:"none"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/authorization-type"})}),(0,i.jsxs)(n.td,{children:["If dex is enabled, and you want to control access to the Certifai policy, set this field to ",(0,i.jsx)(n.code,{children:"rbac"}),". Otherwise, the Certifai policy will have unauthenticated access"]}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"none"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/questionnaire-dir"})}),(0,i.jsxs)(n.td,{children:["A path-like string prefixed with ",(0,i.jsx)(n.code,{children:"gs://"})," for ",(0,i.jsx)(n.code,{children:"gcs"})," storage, ",(0,i.jsx)(n.code,{children:"abfs://"})," for Azure Storage Accounts and ",(0,i.jsx)(n.code,{children:"s3://"})," for S3 / Ceph / Noobaa storage accounts"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"scan-dir"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/policy-control-config-file"})}),(0,i.jsxs)(n.td,{children:["A path-like string (yaml file) prefixed with ",(0,i.jsx)(n.code,{children:"gs://"})," for ",(0,i.jsx)(n.code,{children:"gcs"})," storage, ",(0,i.jsx)(n.code,{children:"abfs://"})," for Azure Storage Accounts and ",(0,i.jsx)(n.code,{children:"s3://"})," for S3 / Ceph / Noobaa storage accounts"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"policy-control-config-file"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/gcs/application-credentials"})}),(0,i.jsx)(n.td,{children:"JSON content of the application credentials file for a service account obtained from GCP. This needs to be a JSON key and not P12."}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"application-credentials"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/s3/access-key"})}),(0,i.jsx)(n.td,{children:"The s3 (or Ceph) access key you configured during your infrastructure setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"access-key"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/s3/endpoint"})}),(0,i.jsx)(n.td,{children:"The s3 (or noobaa/Ceph) endpoint you configured during your infrastructure setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"s3.amazonaws.com"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/s3/secret-key"})}),(0,i.jsx)(n.td,{children:"The s3 (or Ceph) secret-key you configured during your infrastructure setup"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"s3secret1234"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/azure/account-name"})}),(0,i.jsx)(n.td,{children:"The name of your Azure Storage Account with Blob containers"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account-name"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/azure/account-key"})}),(0,i.jsxs)(n.td,{children:["An account key for a Blob Container present in the ",(0,i.jsx)(n.code,{children:"account-name"})," referenced above"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"account-key"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/policy/azure/sas-token"})}),(0,i.jsxs)(n.td,{children:["An SAS token for a Blob Container present in the ",(0,i.jsx)(n.code,{children:"account-name"})," referenced above"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sas-token"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/replicas"})}),(0,i.jsx)(n.td,{children:"The number of scan manager instances you want your organization to run concurrently"}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"2"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/enabled"})}),(0,i.jsx)(n.td,{children:"Boolean. Enables or disables scan manager instances that is added to your installation. Users may disable the scan manager at any time to remove it from the installation to save resources."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"false"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/scan-data-dir"})}),(0,i.jsxs)(n.td,{children:["A path-like string prefixed with ",(0,i.jsx)(n.code,{children:"gs://"})," for ",(0,i.jsx)(n.code,{children:"gcs"})," storage, ",(0,i.jsx)(n.code,{children:"abfs://"})," for Azure Storage Accounts and ",(0,i.jsx)(n.code,{children:"s3://"})," for S3 / Ceph / Noobaa storage accounts"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"scan-data-dir"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/ingress-config/max-body-size"})}),(0,i.jsxs)(n.td,{children:["Size of the client request body; Uses ",(0,i.jsx)(n.code,{children:"m"})," as units. (Optional)"]}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"1000m"})," (megabytes)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/ingress-config/proxy-connect-timeout"})}),(0,i.jsx)(n.td,{children:"Proxy connect timeout for connections to the upstream servers. (Optional)"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:'"180"'})," (seconds)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/scan-manager/ingress-config/proxy-read-timeout"})}),(0,i.jsx)(n.td,{children:"Proxy read timeout for connections to the upstream servers (Optional)"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:'"180"'})," (seconds)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/reference-model/enabled"})}),(0,i.jsx)(n.td,{children:"Boolean. Enables or disables the reference model server that is added to your installation. Users may disable the reference model at any time to remove it from the installation to save resources."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"true"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/reporting/enabled"})}),(0,i.jsx)(n.td,{children:"Boolean. Enables or disables the reporting ETL job that is added to your installation. Users may disable the reporting ETL job at any time to remove it from the installation to save resources."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"true"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/reporting/period"})}),(0,i.jsx)(n.td,{children:"Cron time string describing how often the reporting ETL job should run. The default value is 15 minutes."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"*/15 * * * *"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/reporting/db-conn-str"})}),(0,i.jsx)(n.td,{children:"PostgreSQL connection string.  The location the reporting ETL will load report data to."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"postgresql://user:password@service:port/db"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/monitoring/enabled"})}),(0,i.jsx)(n.td,{children:"Boolean. Enables or disables the runtime monitoring job that is added to your installation. Users may disable the monitoring job at any time to remove it from the installation to save resources."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"true"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/monitoring/period"})}),(0,i.jsx)(n.td,{children:"Cron time string describing how often the monitoring job should run. The default value is 15 minutes."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"*/15 * * * *"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/monitoring/monitoring-dir"})}),(0,i.jsx)(n.td,{children:"A path-like string prefixed with gs:// for gcs storage, abfs:// for Azure storage accounts and s3:// for S3 / Ceph / Noobaa storage accounts"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"monitoring-dir"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/enabled"})}),(0,i.jsx)(n.td,{children:"Boolean. Enables or disables RAI Center instances that is added to your installation. Users may disable the RAI Center at any time to remove it from the installation to save resources."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"false"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/replicas"})}),(0,i.jsx)(n.td,{children:"The number of RAI Center instances you want your organization to run concurrently"}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"1"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/db-conn-str"})}),(0,i.jsx)(n.td,{children:"PostgreSQL connection string.  The location the RAI Center loads data to and fetches data from."}),(0,i.jsxs)(n.td,{children:["default = ",(0,i.jsx)(n.code,{children:"postgresql://user:password@service:port/db"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec/rai-center/rai-reports-dir"})}),(0,i.jsx)(n.td,{children:"A path-like string prefixed with gs:// for gcs storage, abfs:// for Azure storage accounts and s3:// for S3 / Ceph / Noobaa storage accounts"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rai-reports-dir"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"spec.dex"})," section of the above YAML snippet connects an OAuth application of an authentication provider of your choice (supported by Dex) to enable authentication and RBAC of this Cortex Certifai installation."]}),"\n",(0,i.jsx)(n.p,{children:"Apply this custom resource to the namespace you created in the Configuration section above using"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"kubectl apply -f certifai-cr.yaml -n <your_namespace>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const i={},c=r.createContext(i);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);