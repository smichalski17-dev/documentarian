"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7391],{318:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-feature-quality-categorical-3-9638590044a70b2ae9f87319a8b35f5d.png"},2443:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-data-quality-627df2c815e988ad625e74f3cddf93fb.png"},4965:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>n,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"tutorial-extras/ceritfai-basics/factors/data-statistics","title":"Data Statistics and Drift Monitoring","description":"This page provides details about Data Statistics report configuration and output.\\n","source":"@site/docs/tutorial-extras/ceritfai-basics/factors/data-statistics.md","sourceDirName":"tutorial-extras/ceritfai-basics/factors","slug":"/tutorial-extras/ceritfai-basics/factors/data-statistics","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/data-statistics","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Data Statistics and Drift Monitoring","linkTitle":"Data Statistics Drift Monitoring","description":"This page provides details about Data Statistics report configuration and output.\\n"},"sidebar":"templateSidebar","previous":{"title":"AI Trust Index","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/atx"},"next":{"title":"Explainability and Explanations","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/explainability"}}');var s=i(4848),r=i(8453);const n={title:"Data Statistics and Drift Monitoring",linkTitle:"Data Statistics Drift Monitoring",description:"This page provides details about Data Statistics report configuration and output.\n"},o=void 0,d={},c=[{value:"Evaluations",id:"evaluations",level:2},{value:"Setup",id:"setup",level:2},{value:"Data Statistics Reports",id:"data-statistics-reports",level:2},{value:"Data Quality",id:"data-quality",level:3},{value:"Feature Quality",id:"feature-quality",level:3},{value:"Feature Drift",id:"feature-drift",level:3},{value:"Prediction Distribution",id:"prediction-distribution",level:3},{value:"Prediction Drift",id:"prediction-drift",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"This page provides details about Data Statistics report configuration and output."}),"\n",(0,s.jsx)(t.p,{children:"Data Statistics and Drift Monitoring capabilities can be accessed through this publicly available notebook (link has been removed)."}),"\n",(0,s.jsx)(t.p,{children:"The Data Statistics evaluation type is a tool to monitor changes in new datasets when compared to a reference dataset. Certifai's data_statistics evaluation type allows users to monitor data trends, analyze data characteristics, and detect the presence of both feature drift and prediction label drift."}),"\n",(0,s.jsxs)(t.p,{children:["The output of this evaluation type is NOT calculated as part of the ",(0,s.jsx)(t.a,{href:"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/atx",children:"ATX score"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Scans that run Data Statistics evaluations offer report output in the publicly available notebook for Toolkit users and in the future will output to a Monitoring Dashboard for Enterprise users. Only the Toolkit version is currently available."}),"\n",(0,s.jsx)(t.h2,{id:"evaluations",children:"Evaluations"}),"\n",(0,s.jsx)(t.p,{children:"The generated report for Data Statistics evaluates several aspects related to the aggregation of monitored datasets:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Data Quality"}),": Counts of missing data (data not present in the monitored data) or counts of unexpected data (data not present in the reference data),"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Feature Quality"}),": Quartiles for numeric features or distribution counts for categorical features"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Feature Drift"}),": Univariate hypothesis testing to detect drift in individual features of the monitored data"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Prediction Distribution"}),": Prediction value quartiles for regression tasks or label distribution counts for classification tasks"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Prediction Drift"}),": Univariate hypothesis testing to detect drift in the prediction label"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"setup",children:"Setup"}),"\n",(0,s.jsx)(t.p,{children:"This type of report is meant to evaluate the monitored datasets behavior over a period of time. To facilitate this paradigm curate, label, and load datasets chronologically."}),"\n",(0,s.jsx)(t.p,{children:"Configure use case and scans for data statistics as you would for other report types. No model access and model access scan types may be configured this type of report"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Select scan evaluation type: ",(0,s.jsx)(t.code,{children:"data_statistics"})]}),"\n",(0,s.jsxs)(t.li,{children:["Data Statistics reports typically monitor a specific set of data features that you specify as ",(0,s.jsx)(t.code,{children:"monitored-features"}),". You can supply features as a comma delimited list."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"If no list is provided and a model is given, a list of top N (default 50) monitored features will be calculated based on feature importance learned from the model."}),"\n",(0,s.jsx)(t.p,{children:"Scans are run periodically and compared against a reference dataset to generate the reports described below."}),"\n",(0,s.jsx)(t.h2,{id:"data-statistics-reports",children:"Data Statistics Reports"}),"\n",(0,s.jsx)(t.h3,{id:"data-quality",children:"Data Quality"}),"\n",(0,s.jsx)(t.p,{children:"Data constantly changes, and it is important to keep track of values as they appear or disappear. The data quality of the incoming monitored datasets is tracked for the following statistics:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"missing_value"}),": instances of missing values (i.e. NaNs) in the monitored dataset, either in the entire dataset (cells) or by data observation (rows)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"unexpected"}),": instances where the monitored dataset contains feature values that do not exist in the entire reference dataset (cells) or by data observation (rows)"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Data Quality visualizations"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Data Quality reports",src:i(2443).A+"",width:"1996",height:"812"})}),"\n",(0,s.jsxs)(t.p,{children:["The monitored datasets in the example exhibit some cells (as well as rows and columns) where data is missing (i.e. NaN) as shown in ",(0,s.jsx)(t.code,{children:"num_cells_missing_value"})," and ",(0,s.jsx)(t.code,{children:"num_rows_missing_value"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["In addition values in the monitored data are not present in the reference set, which is depicted in ",(0,s.jsx)(t.code,{children:"num_cells_unexpected"})," and ",(0,s.jsx)(t.code,{children:"num_rows_unexpected"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"feature-quality",children:"Feature Quality"}),"\n",(0,s.jsx)(t.p,{children:"The feature quality of the monitored datasets tracks the following distribution statistics:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Quartiles"})," (min, 25%, 50%, 75%, and max): for numeric features"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Data counts"}),": for categorical features"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"These statistics allow you to monitor the distribution changes in a given feature across uploads of the monitored datasets."}),"\n",(0,s.jsx)(t.p,{children:"There are various ways to investigate the categorical features of the monitored sets as depicted in the examples below."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Numeric Feature Quality visualizations"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Feature Quality - Numeric reports",src:i(8367).A+"",width:"1728",height:"1492"})}),"\n",(0,s.jsx)(t.p,{children:"The quartiles are plotted over all datasets for the monitored numeric features."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Categorical Feature Quality visualizations (all features, one dataset)"})}),"\n",(0,s.jsx)(t.p,{children:"The first example visualizes the count distributions of all the categorical features in one particular dataset."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Feature Quality - Categorical report",src:i(5142).A+"",width:"1050",height:"1532"})}),"\n",(0,s.jsx)(t.p,{children:"This visualization can help you see how the categorical data is distributed across the category values."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Categorical Feature Quality visualizations (any feature, all datasets)"})}),"\n",(0,s.jsx)(t.p,{children:"The second example investigates the data distribution over all datasets for any of the features (e.g. workclass)."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Feature Quality - Categorical report",src:i(8631).A+"",width:"1050",height:"1514"})}),"\n",(0,s.jsx)(t.p,{children:"Over time (i.e. over monitored datasets), an increasing number of instances of the Federal-gov categorical value occur. All the other possible values hold steady or decrease."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Compare percent breakdown trend per categorical feature over monitored datasets"})}),"\n",(0,s.jsx)(t.p,{children:"The data distribution by percentage for each feature over the monitored datasets is visualized in the third example."}),"\n",(0,s.jsx)(t.p,{children:"The top 5 values in each categorical feature (determined by highest account in the reference dataset) are depicted and  all the other values are grouped together."}),"\n",(0,s.jsx)(t.p,{children:"Note that Certifai only returns count values if a categorical feature has 15 or fewer values - this helps avoid listing high cardinality features. As a result, categorical features with high cardinality cannot be displayed in this way."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Feature Quality - Categorical report",src:i(318).A+"",width:"1642",height:"1404"})}),"\n",(0,s.jsx)(t.p,{children:"The above feature distribution plots allow a user to quickly visualize trends across their data and gauge whether intervention is needed to retrain models or to investigate recent data uploads."}),"\n",(0,s.jsx)(t.h3,{id:"feature-drift",children:"Feature Drift"}),"\n",(0,s.jsx)(t.p,{children:"Data drift detection uses univariate hypothesis testing. Depending on the type of the feature (i.e. numeric or categorical) or the type of learning task (i.e. regression or classification), different tests are employed:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Kolmogorov-Smirnov Statistic for Numeric Drift Detection"}),": a nonparametric evaluation of the similarity of two distributions through the cumulative empirical density function"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"\ud835\udf122  Statistic for Categorical Drift Detection"}),": a hypothesis test used primarily for count data"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The presence of drift in any of the features of the monitored datasets may be detected. Each feature in the monitored datasets is compared to the same feature in the reference dataset."}),"\n",(0,s.jsx)(t.p,{children:"The drift results from each of the scan reports is aggregated, so the appropriate drift statistic (KS or CS depending on the data type) for each of the features as a function of the time of the dataset upload can be tracked."}),"\n",(0,s.jsx)(t.p,{children:"In addition to the drift statistics, the threshold value that signifies whether the drift metric is statistically significant is displayed."}),"\n",(0,s.jsx)(t.p,{children:"Any crossing of the drift statistic above the threshold value indicates possible data drift."}),"\n",(0,s.jsx)(t.p,{children:"Note that each dataset can have a unique crossing or non-crossing. If a dataset exhibits a statistically significant drift, you can focus your attention on how to resolve the drift: retrain the model or investigate the data in question."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Feature Drift report"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Feature Drift reports",src:i(8815).A+"",width:"1674",height:"892"})}),"\n",(0,s.jsx)(t.h3,{id:"prediction-distribution",children:"Prediction Distribution"}),"\n",(0,s.jsx)(t.p,{children:"The trend in the distribution of the prediction labels of the monitored datasets can also be assessed to determine if drift from the reference predictions has occurred."}),"\n",(0,s.jsx)(t.p,{children:"Label drift for classification tasks is determined using a chi-squared hypothesis test (i.e. treated as categorical)."}),"\n",(0,s.jsx)(t.p,{children:"Drift for regression tasks is determined using a Kolmogorov-Smirnov hypothesis test (i.e. treated as numeric)."}),"\n",(0,s.jsx)(t.h3,{id:"prediction-drift",children:"Prediction Drift"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example Prediction Drift report"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Prediction Drift reports",src:i(5806).A+"",width:"1650",height:"462"})}),"\n",(0,s.jsx)(t.p,{children:"The drift in the labels becomes statistically significant for a few of the datasets (i.e. crossing the threshold)."}),"\n",(0,s.jsx)(t.p,{children:"Even though the amount of drift increases over time, the drift is introduced in a stochastic fashion, independently for each dataset. Therefore, while monitored dataset 7 crosses the threshold, subsequently monitored datasets are not guaranteed to cross the drift threshold."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},5142:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-feature-quality-categorical-ac8bd954d076c5fa35c9abbea31e55fd.png"},5806:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-prediction-drift-6708a634fb26867109bc350e935d5cbc.png"},8367:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-feature-quality-numeric-7ec73bd7b3f3a84a9786600d1e5dc0f6.png"},8453:(e,t,i)=>{i.d(t,{R:()=>n,x:()=>o});var a=i(6540);const s={},r=a.createContext(s);function n(e){const t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),a.createElement(r.Provider,{value:t},e.children)}},8631:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-feature-quality-categorical-2-f9ee993927a830ad418f470b5b3da992.png"},8815:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/data-stats-feature-drift-096264b56bf523fc28e7f15c73871205.png"}}]);