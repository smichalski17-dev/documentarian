"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7481],{2757:(e,i,a)=>{a.d(i,{A:()=>s});const s=a.p+"assets/images/fairness-equalized-odds-9afb04af6d9fa222fd02c58e91a53bd9.png"},6870:(e,i,a)=>{a.d(i,{A:()=>s});const s=a.p+"assets/images/fairness-equal-opp-3c179551a443ae09dd0f7b032198e654.png"},7481:(e,i,a)=>{a.r(i),a.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tutorial-extras/ceritfai-basics/factors/fairness","title":"Fairness","description":"This page provides details about the Fairness trust factor in Cortex Certifai.\\n","source":"@site/docs/tutorial-extras/ceritfai-basics/factors/fairness.md","sourceDirName":"tutorial-extras/ceritfai-basics/factors","slug":"/tutorial-extras/ceritfai-basics/factors/fairness","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/fairness","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Fairness","linkTitle":"Fairness","description":"This page provides details about the Fairness trust factor in Cortex Certifai.\\n"},"sidebar":"templateSidebar","previous":{"title":"Explainability and Explanations","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/explainability"},"next":{"title":"Performance Metric","permalink":"/documentarian/docs/tutorial-extras/ceritfai-basics/factors/performance-metric"}}');var t=a(4848),n=a(8453);const r={title:"Fairness",linkTitle:"Fairness",description:"This page provides details about the Fairness trust factor in Cortex Certifai.\n"},o=void 0,c={},l=[{value:"What is Fairness?",id:"what-is-fairness",level:2},{value:"Fairness Metrics",id:"fairness-metrics",level:2},{value:"What is Equalized Odds?",id:"what-is-equalized-odds",level:3},{value:"What is Equal Opportunity?",id:"what-is-equal-opportunity",level:3},{value:"What is Demographic Parity?",id:"what-is-demographic-parity",level:3},{value:"What is Predictive Parity (Sufficiency)?",id:"what-is-predictive-parity-sufficiency",level:3},{value:"What is Burden?",id:"what-is-burden",level:3},{value:"Burden-based Fairness Concepts",id:"burden-based-fairness-concepts",level:4},{value:"Favorability Values for Classification",id:"favorability-values-for-classification",level:5},{value:"Defining a favorable outcome for Regression",id:"defining-a-favorable-outcome-for-regression",level:5},{value:"Fairness calculations",id:"fairness-calculations",level:2},{value:"How is Fairness Calculated?",id:"how-is-fairness-calculated",level:3},{value:"How is Burden calculated?",id:"how-is-burden-calculated",level:3},{value:"How are Parity and Equality Fairness Scores Calculated?",id:"how-are-parity-and-equality-fairness-scores-calculated",level:3},{value:"What Is the Importance of Fairness?",id:"what-is-the-importance-of-fairness",level:2},{value:"How is Fairness Displayed in Certifai?",id:"how-is-fairness-displayed-in-certifai",level:2}];function d(e){const i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.p,{children:"This page provides details about the Fairness trust factor in Cortex Certifai. Certifai supports multiple measures of Fairness which are described on this page, including:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Burden"}),"\n",(0,t.jsx)(i.li,{children:"Demographic Parity"}),"\n",(0,t.jsx)(i.li,{children:"Predictive Parity (Sufficiency)"}),"\n",(0,t.jsx)(i.li,{children:"Equalized Odds"}),"\n",(0,t.jsx)(i.li,{children:"Equal Opportunity"}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Demographic Parity"})," and ",(0,t.jsx)(i.strong,{children:"Burden"})," have the advantage of not requiring ground truth (labeled data), and they are not subject to bias that may have occurred in the labeling (e.g. historical bias)."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Equal Opportunity"}),", ",(0,t.jsx)(i.strong,{children:"Equalized Odds"}),", and ",(0,t.jsx)(i.strong,{children:"Predictive Parity"})," are useful when bias in ground truth is not a concern."]}),"\n",(0,t.jsx)(i.h2,{id:"what-is-fairness",children:"What is Fairness?"}),"\n",(0,t.jsx)(i.p,{children:"Fairness is a measure of the disparity between the change required to alter the outcome in categorical groups defined by the fairness grouping feature."}),"\n",(0,t.jsx)(i.p,{children:"Fairness is a particular concern in AI systems because bias exhibited by predictive models can render models untrustworthy and unfair to one or more target groups."}),"\n",(0,t.jsx)(i.p,{children:"For example, different models can exhibit any number of biases towards features like gender, age, or educational level."}),"\n",(0,t.jsx)(i.p,{children:"Features targeted for fairness evaluation may be numeric (e.g. age) or non-numeric (e.g. marital status)."}),"\n",(0,t.jsx)(i.p,{children:"Fairness metrics are based on the prediction results depicted in the 'confusion matrix' (e.g. demographic parity) to determine if unfairness has occurred - regardless of whether the outcome is favorable or unfavorable and whether or not it was predicted correctly. These metrics require ground truth labels."}),"\n",(0,t.jsx)(i.p,{children:"However, traditional fairness metrics fail to outline how one could overcome this inequality or analyze results in the absence of ground truth labels. To address these shortcomings, we devise a fairness metric in Certifai called Burden, which is based on the closest counterfactuals of data points. This allows a user to gain a perspective of how difficult it may be to obtain a favorable outcome since the counterfactual exists on the decision boundary."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Example:"}),'\nIn the use case of binary classification models that are predicting if a loan applicant will be granted or denied a loan, Certifai users might want to decide which model shows a higher level of fairness between male, female, and self-assigning applicants. In this case, the user would run a scan choosing "gender" as one of the fairness grouping features. The report generated by Scan Manager would assign results as "favorable" for applicants granted a loan and "unfavorable" for applicants denied a loan.']}),"\n",(0,t.jsx)(i.p,{children:"Fairness reports may be selected as one of the output types in Certifai Scan Manager."}),"\n",(0,t.jsx)(i.h2,{id:"fairness-metrics",children:"Fairness Metrics"}),"\n",(0,t.jsx)(i.h3,{id:"what-is-equalized-odds",children:"What is Equalized Odds?"}),"\n",(0,t.jsx)(i.p,{children:"The Equalized Odds fairness metric is based on the 'confusion matrix'. Thus, the metric depends on the predicted outcome of the model and the ground truth labels."}),"\n",(0,t.jsx)(i.p,{children:"Equalized odds ensures that the probability of a positive prediction is the same for both favorable and unfavorable truth labels across all groups of a feature. In other words, the model's true positive rates and false positive rates are the same across groups."}),"\n",(0,t.jsx)(i.p,{children:"Equal Odds is useful when positive predictions are important and false positives are a concern (e.g. granting a loan)."}),"\n",(0,t.jsx)(i.p,{children:"For example: Equalized Odds states that the favorable outcome (being granted a loan) occurs at roughly the same percent of the time for all protected groups (males and females) (AND correspondingly the unfavorable outcome occurs at roughly the same percent of the time)."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Example: Equalized Odds based on income and using payment history"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Equalized Odds depiction",src:a(2757).A+"",width:"1286",height:"882"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:(0,t.jsx)(i.a,{href:"https://towardsdatascience.com/how-to-define-fairness-to-detect-and-prevent-discriminatory-outcomes-in-machine-learning-ef23fd408ef2",children:'Image taken from "How to define fairness to detect and prevent discriminatory outcomes in Machine Learning" by Valeria Cortez (Sept. 23, 2019)'})})}),"\n",(0,t.jsx)(i.h3,{id:"what-is-equal-opportunity",children:"What is Equal Opportunity?"}),"\n",(0,t.jsx)(i.p,{children:"Equal Opportunity is also based on the 'confusion matrix'. Thus, the metric depends on the predicted outcome of the model and the ground truth labels."}),"\n",(0,t.jsx)(i.p,{children:"Equal Opportunity fairness metric verifies that odds of obtaining a favorable result are equal for a single protected group across a specified attribute's values."}),"\n",(0,t.jsx)(i.p,{children:"Equal opportunity is useful when positive predictions are important, as long as false positives are not a concern (e.g. detecting fraudulent transactions)."}),"\n",(0,t.jsx)(i.p,{children:'Equal opportunity ensures that if 80% of qualified males get the favorable outcome, a similar percentage of females do. Where "qualified" means "favorable ground truth".'}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Example B: Equal Opportunity based on income and using payment history"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Equal Opportunity depiction",src:a(6870).A+"",width:"1278",height:"888"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:(0,t.jsx)(i.a,{href:"https://towardsdatascience.com/how-to-define-fairness-to-detect-and-prevent-discriminatory-outcomes-in-machine-learning-ef23fd408ef2",children:'Image taken from "How to define fairness to detect and prevent discriminatory outcomes in Machine Learning" by Valeria Cortez (Sept. 23, 2019)'})})}),"\n",(0,t.jsx)(i.h3,{id:"what-is-demographic-parity",children:"What is Demographic Parity?"}),"\n",(0,t.jsx)(i.p,{children:"Demographic Parity ensures that the proportion of individuals in each protected group (e.g. male/female) of a protected feature (e.g. gender) receives a positive outcome at equal rates. (e.g. both men and women receive auto loans 40% of the time across all zip codes)."}),"\n",(0,t.jsx)(i.p,{children:"Demographic parity is often used where regulations require the minimization of disparate impact."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Example: Demographic based on income and using payment history"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Demographic disparity depiction",src:a(7947).A+"",width:"1422",height:"1070"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.em,{children:(0,t.jsx)(i.a,{href:"https://towardsdatascience.com/how-to-define-fairness-to-detect-and-prevent-discriminatory-outcomes-in-machine-learning-ef23fd408ef2",children:'Image taken from "How to define fairness to detect and prevent discriminatory outcomes in Machine Learning" by Valeria Cortez (Sept. 23, 2019)'})})}),"\n",(0,t.jsx)(i.h3,{id:"what-is-predictive-parity-sufficiency",children:"What is Predictive Parity (Sufficiency)?"}),"\n",(0,t.jsx)(i.p,{children:"Predictive Parity (or Sufficiency) is based on the 'confusion matrix'. Thus, the metric depends on the predicted outcome of the model and the ground truth labels."}),"\n",(0,t.jsx)(i.p,{children:"Predictive Parity verifies that the precision rates for protected groups are (e.g. male/female) of a protected feature (e.g. gender) are roughly equivalent."}),"\n",(0,t.jsx)(i.p,{children:"For example Predictive Parity ensures that the model predicting the rate of loans being granted is accurate across zip codes."}),"\n",(0,t.jsx)(i.h3,{id:"what-is-burden",children:"What is Burden?"}),"\n",(0,t.jsx)(i.p,{children:'Burden is a group-based metric from the perspective of the "unfavorable" outcome. burdens allows a user to gain a perspective of how difficult it may be to obtain a favorable outcome.'}),"\n",(0,t.jsx)(i.p,{children:"Burden can provide a more nuanced metric reflecting the distribution of predictions. It is also the only metric currently supported for regression use cases."}),"\n",(0,t.jsx)(i.p,{children:'Burden represents a weighted proportion of individual groups in a protected feature who experience a negative outcome. This weight is determined by the average distance of a group to the outcome boundary between a favorable and unfavorable outcome (derived by counterfactuals). We can interpret this distance as the "burden" an individual must overcome to receive a favorable outcome.'}),"\n",(0,t.jsx)(i.p,{children:"Fairness Burden scores are derived by using counterfactuals to find the degree to which the values of an input data point must change to obtain a favorable prediction from the model."}),"\n",(0,t.jsx)(i.p,{children:"The Burden is the average amount of change required for members of feature groups to achieve a favorable result (e.g. loan granted)."}),"\n",(0,t.jsx)(i.p,{children:"A lower number indicates that less change is required for that group to have a favorable outcome."}),"\n",(0,t.jsx)(i.p,{children:"If the burden for one group is very high and the burden for another group is low, the model may be unfair to the group with the higher burden."}),"\n",(0,t.jsx)(i.p,{children:"Ideally, the objective is to have burdens as close to one another as possible, which indicates the model is treating members within the selected groups fairly."}),"\n",(0,t.jsx)(i.p,{children:"It is important to note that burden is not comparable across features. They are only designed to compare the groups within a single feature. (e.g you cannot compare fairness between age and marital status.)"}),"\n",(0,t.jsx)(i.h4,{id:"burden-based-fairness-concepts",children:"Burden-based Fairness Concepts"}),"\n",(0,t.jsx)(i.h5,{id:"favorability-values-for-classification",children:"Favorability Values for Classification"}),"\n",(0,t.jsx)(i.p,{children:"Favorability options give users alternative ways to define what outcomes are considered favorable."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"None"}),": Changes are neither favorable nor unfavorable, therefore a change to any other outcome class is a counterfactual. (NOTE: Fairness cannot be calculated with favorability of NONE.)"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Explicit/Partitioned"}),": Identifies a change to any class in the other partition is counterfactual; a favorable change is from the unfavorable partition to the favorable one"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Ordered"}),": Outcome classes have an implicit ordering from most to least favorable. Any change in outcome class may be sufficient to be considered a counterfactual, but it is worth noting that the change is relative to the original value."]}),"\n"]}),"\n",(0,t.jsx)(i.h5,{id:"defining-a-favorable-outcome-for-regression",children:"Defining a favorable outcome for Regression"}),"\n",(0,t.jsx)(i.p,{children:"Unlike Classification tasks where a favorable outcome corresponds with one or more outcome classes, defining a favorable outcome for a Regression task can depend on the distribution being predicted."}),"\n",(0,t.jsx)(i.p,{children:"Certifai allows users to define a predicted outcome as being favorable for Regression tasks relative to starting point or via a fixed threshold."}),"\n",(0,t.jsx)(i.p,{children:"For example, in a use case where Regression models are predicting the total insurance claim amount for an individual, let us assume that having receiving a higher claim amount is a more favorable result. An increase from $500 to $501 might not seem favorable when compared to a potential increase from $500 to $10,000. Alternatively, we might consider any claim amount above $5000 as favorable, and any claim below as unfavorable."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Relative change"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"A significant increase or decrease from the original prediction value is considered favorable."}),"\n",(0,t.jsx)(i.li,{children:"The amount of change that is considered significant is specified in terms of standard deviations for the predicted outcome."}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Absolute change"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Defines a threshold as a percentile or absolute value."}),"\n",(0,t.jsx)(i.li,{children:"Favorable outcomes are either strictly above or below the threshold."}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"fairness-calculations",children:"Fairness calculations"}),"\n",(0,t.jsx)(i.h3,{id:"how-is-fairness-calculated",children:"How is Fairness Calculated?"}),"\n",(0,t.jsx)(i.p,{children:"Certifai aggregates the metrics for each group into a feature fairness score, where 100% is perfectly fair (no disparity). The overall fairness score is taken to be the minimum score for any fairness feature."}),"\n",(0,t.jsx)(i.p,{children:"For assessment of disparate impact, it is common to assess the maximum disparity across the groups. Certifai uses maximum disparity for all of the metrics other than burden."}),"\n",(0,t.jsx)(i.p,{children:"Certifai uses Gini to aggregate burden across the groups, giving an indication of the mean disparity."}),"\n",(0,t.jsx)(i.h3,{id:"how-is-burden-calculated",children:"How is Burden calculated?"}),"\n",(0,t.jsx)(i.p,{children:"Here are the brief steps for calculating fairness:"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"Calculate burden for each group."}),"\n",(0,t.jsx)(i.li,{children:"Compute the Gini index for each feature group."}),"\n",(0,t.jsx)(i.li,{children:"Convert to a percentage that is (1 - GiniIndex)."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"If all feature group burdens are equal, you get a 100% fair system, and if only one group has non-zero burden but none of the others do, you get 0."}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Example"}),":\nIn a binary classification problem where the positive class is the desired outcome:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"If the instance is classified as positive, there is 0 burden."}),"\n",(0,t.jsx)(i.li,{children:"If the instance is classified as negative, burden is a monotonic function, f() of the distance to the decision boundary, as this distance indicates how much work will need to be done (i.e. the burden) to flip to the desired outcome."}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"how-are-parity-and-equality-fairness-scores-calculated",children:"How are Parity and Equality Fairness Scores Calculated?"}),"\n",(0,t.jsx)(i.p,{children:"The Parity and Equality Fairness Feature score is based on the maximum discrepancy in the metric between fairness groupings."}),"\n",(0,t.jsxs)(i.p,{children:["For example, in demographic parity if 75% of men receive a positive outcome, and only 50% of women do, then the fairness score is Calculated as follows: ",(0,t.jsx)(i.code,{children:"1-((0.75-0.5)/0.75) = 66.7%"}),"."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"NOTE"}),": The denominator is the largest outcome group, regardless of whether the outcome is positive or negative. If 25% of men and 20% of women obtained a favorable outcome, then 75% or men and 80% of women had unfavorable outcomes so the score would be calculated as follows: ",(0,t.jsx)(i.code,{children:"1-((0.25-0.2)/0.8) = 93.75%"})]}),"\n",(0,t.jsx)(i.h2,{id:"what-is-the-importance-of-fairness",children:"What Is the Importance of Fairness?"}),"\n",(0,t.jsx)(i.p,{children:"Based on fairness scores the following actions might be taken by the various Certifai users:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Data scientists"})," might attempt to retrain any of the models with datasets that contain more equal distributions for age and status and compare the results again."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Business decision-makers"})," might select the fairest model for production deployment of their loan application"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Compliance officers"})," might reject the use of models with overall scores or feature category differences that don\u2019t meet a certain threshold for fairness since that is a critical aspect of trusted AI."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"how-is-fairness-displayed-in-certifai",children:"How is Fairness Displayed in Certifai?"}),"\n",(0,t.jsx)(i.p,{children:"The Fairness by Group visualizations are displayed in the Console:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"An overall view that shows a the average fairness score for each model."}),"\n",(0,t.jsx)(i.li,{children:"A model view that shows a histogram of the fairness scores for each grouping feature in the model."}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:['At the top of the page, the favorable outcome for the scan is identified, (for example "Loan Granted" for the Banking',":Loan"," Approval sample use case)."]}),"\n",(0,t.jsxs)(i.p,{children:["Each of the Fairness features that were defined for the scan is displayed in a separate graph. In the case of the Banking",":Loan"," Approval use case the features are status and age."]})]})}function h(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},7947:(e,i,a)=>{a.d(i,{A:()=>s});const s=a.p+"assets/images/fairness-demographic-parity-590290771581099d62445905df248763.png"},8453:(e,i,a)=>{a.d(i,{R:()=>r,x:()=>o});var s=a(6540);const t={},n=s.createContext(t);function r(e){const i=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(n.Provider,{value:i},e.children)}}}]);